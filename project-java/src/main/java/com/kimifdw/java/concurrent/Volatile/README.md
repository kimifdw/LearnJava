# volatile（轻量级的synchronized）
1. 定义：java编程语言允许线程访问共享变量，为了确保共享变量能被准确和一致的更新，线程应该确保通过排他锁单独获得这个变量。当一个变量被声明为volatile类型后，编译器与运行时都会注意到这个变量是共享的，因此不会将该变量重排序，也不会被缓存在寄存器或者对其他处理器不可见的地方，所以总会返回最新写入的值。
2. 用于修饰在多线程环境下某一变量值的一致性【线程可见性】；
3. 在LinkedTransferQueue中，使用了volatile，追加64字节提高并发编程性能；
4. 可见性：一个线程修改了这个变量的值，会立马写回主存储器中，这样就能被另一个线程看到这个变量的值得变化（**多线程是并发不是并行**）。确保编译器不会对代码作寄存器优化。从内存可见性的角度，写入volatile变量相当于退出同步代码块，而读取volatile变量相当于进入同步代码块。
5. 正确的使用方式。
   1. 确保它们自身状态的可见性；
   2. 确保它们所引用对象的状态的可见性；
   3. 标识一些重要的程序生命周期事件的发生；
   4. 对变量的写入操作不依赖变量的当前值，或者能确保只有单个线程更新变量的值
   5. 该变量不会与其他状态变量一起纳入不变性条件中
   6. 在访问变量时不需要加锁。
   7. 仅当volatile能简化代码实现以及对同步策略的验证时，才应该使用它们；
6. 仅当一个变量参与到包含其他状态变量的不变性条件时，才可以声明为volatile类型。
7. volatile无法保证复合操作的原子性。
8. 保证线程可见性且提供了一定的有序性，但无法保证原子性。
9. 禁止指令重排序。
    1. 当程序执行到volatile变量的读操作或者写操作时，在其前面的操作的更改肯定全部已经进行，且结果已经对后面的操作可见；在其后面的操作肯定还没有进行；
    2. 在进行指令优化时，不能将在对volatile变量访问的语句放在其后面执行，也不能把volatile变量后面的语句放到其前面执行。
10. 参考文献
    1. [聊聊并发（一）——深入分析Volatile的实现原理](http://www.infoq.com/cn/articles/ftf-java-volatile)：完成
    2. [Java多线程编程那些事：volatile解惑](http://www.infoq.com/cn/articles/java-multi-thread-volatile?utm_campaign=rightbar_v2&utm_source=infoq&utm_medium=articles_link&utm_content=link_text)
    3. [多线程程序中操作的原子性](http://www.cppblog.com/elva/archive/2011/01/21/139019.html)